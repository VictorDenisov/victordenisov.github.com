
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Victor Denisov's Blog</title>
  <meta name="author" content="Victor Denisov">

  
  <meta name="description" content="Usually people share their knowledge about monads right after they get to
understand them. I decided to share my experience with monads when a friend &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://victordenisov.github.io/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Victor Denisov's Blog" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="/javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Victor Denisov's Blog</a></h1>
  
    <h2>A Blog About Programming</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="sitesearch" value="victordenisov.github.io">
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/cluedomate">CluedoMate</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/about-me">About Me</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2019/05/06/my-trip-into-monads/">My Trip Into Monads</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2019-05-06T19:28:58-07:00'><span class='date'><span class='date-month'>May</span> <span class='date-day'>6</span><span class='date-suffix'>th</span>, <span class='date-year'>2019</span></span> <span class='time'>7:28 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Usually people share their knowledge about monads right after they get to
understand them. I decided to share my experience with monads when a friend of
mine started studying this topic. So here it is - my trip into monads.</p>

<p>In this blog post I&rsquo;m not going to give you the exhaustive list of all monads,
or explain the theory behind monads. I&rsquo;m going to share with you the example
that I used to develop intuition about monads.</p>

<p>Let&rsquo;s solve the following problem. We are going to build a library for parsing
different values from a string. For the sake of simplicity we are going to
build two functions. One function parses a number delimited by whitespaces. The
other function will be parsing a string delimited by whitespaces. I&rsquo;m going to
illustrate what monad is in Go. Our Go will be a slightly special flavor of Go.
It will have genercis. However all the idioms that I demonstrate here are
imported from Haskell.</p>

<p>In this exercise let&rsquo;s imagine that Go is a purely functional language. You
can&rsquo;t use any imperative constructs in our version of Go. With one exception
though. Consecutive assignments are allowed. Those are not imperative
constructs. Also our Go will have two features: generics and tuples. As a
result half of the code here won&rsquo;t compile in Go. This code can be successfully
rewritten in Java and compiled. But I decided to go with the modified Go
instead of Java because of Go&rsquo;s brevity.</p>

<p>Let&rsquo;s declare the type of our first function. The function that parses a string.
This function will be accepting an input string and returning the result and
the remaining string.</p>

<figure class='code'><figcaption><span>parseString </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='go'><span class='line'><span class="kd">func</span> <span class="nx">parseString</span><span class="p">(</span><span class="nx">s</span> <span class="kt">string</span><span class="p">)</span> <span class="p">(</span><span class="nx">res</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">rem</span> <span class="kt">string</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="nx">s</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">||</span> <span class="nx">s</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="sc">&#39; &#39;</span> <span class="p">{</span>
</span><span class='line'>      <span class="k">return</span> <span class="err">&#39;&#39;</span><span class="p">,</span> <span class="nx">s</span>
</span><span class='line'>  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span class='line'>      <span class="nx">res</span><span class="p">,</span> <span class="nx">rem</span> <span class="p">=</span> <span class="nx">parseString</span><span class="p">(</span><span class="nx">s</span><span class="p">[:</span><span class="mi">1</span><span class="p">])</span>
</span><span class='line'>      <span class="k">return</span> <span class="nx">s</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">rem</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>ParseInt will look very similar. It can even use parseString except it will need
to convert the result to int.</p>

<figure class='code'><figcaption><span>parseInt </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='go'><span class='line'><span class="kd">func</span> <span class="nx">parseInt</span><span class="p">(</span><span class="nx">s</span> <span class="kt">string</span><span class="p">)</span> <span class="p">(</span><span class="nx">res</span> <span class="kt">int</span><span class="p">,</span> <span class="nx">rem</span> <span class="kt">string</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="nx">resString</span><span class="p">,</span> <span class="nx">rem</span> <span class="p">=</span> <span class="nx">parseString</span><span class="p">(</span><span class="nx">s</span><span class="p">)</span>
</span><span class='line'>  <span class="nx">res</span><span class="p">,</span> <span class="nx">_</span> <span class="p">=</span> <span class="nx">strconf</span><span class="p">.</span><span class="nx">Atoi</span><span class="p">(</span><span class="nx">resString</span><span class="p">)</span> <span class="c1">// we are ignoring error for the simplicity of the example</span>
</span><span class='line'>  <span class="k">return</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">rem</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Now let&rsquo;s write a function that is supposed to use our two functions. It will
parse an integer and a string from the provided input string. It will also
return the remaining string.</p>

<figure class='code'><figcaption><span>Example </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='go'><span class='line'><span class="kd">func</span> <span class="nx">parse</span><span class="p">(</span><span class="nx">s</span> <span class="kt">string</span><span class="p">)</span> <span class="p">(</span><span class="nx">a</span> <span class="kt">int</span><span class="p">,</span> <span class="nx">b</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">rem</span> <span class="kt">string</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="nx">a</span><span class="p">,</span> <span class="nx">rem1</span> <span class="o">:=</span> <span class="nx">parseInt</span><span class="p">(</span><span class="nx">s</span><span class="p">)</span>
</span><span class='line'>  <span class="nx">b</span><span class="p">,</span> <span class="nx">rem2</span> <span class="o">:=</span> <span class="nx">parseString</span><span class="p">(</span><span class="nx">rem1</span><span class="p">)</span>
</span><span class='line'>  <span class="k">return</span> <span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">rem2</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Now, people who were implementing it for the first time in Haskell noticed that
there is a repetition in this code. We pass the remainder of the previous
parse function and pass it into the next one. They decided to abstract this
repetition into a separate data structure. Let&rsquo;s declare a new structure.</p>

<figure class='code'><figcaption><span>Parser Type </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='go'><span class='line'><span class="kd">type</span> <span class="nx">Parser</span><span class="p">&lt;</span><span class="nx">V</span><span class="p">&gt;</span> <span class="kd">func</span> <span class="p">(</span><span class="nx">s</span> <span class="kt">string</span><span class="p">)</span> <span class="p">(</span><span class="nx">v</span> <span class="nx">V</span><span class="p">,</span> <span class="nx">s</span> <span class="kt">string</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>Now let&rsquo;s change the signature of our parse functions a bit:</p>

<figure class='code'><figcaption><span>New Version of parseString </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='go'><span class='line'><span class="kd">func</span> <span class="nx">parseString</span><span class="p">()</span> <span class="nx">Parser</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">return</span> <span class="kd">func</span> <span class="p">(</span><span class="nx">s</span> <span class="kt">string</span><span class="p">)</span> <span class="p">(</span><span class="kt">string</span><span class="p">,</span> <span class="kt">string</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="nx">s</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">||</span> <span class="nx">s</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="sc">&#39; &#39;</span> <span class="p">{</span>
</span><span class='line'>          <span class="k">return</span> <span class="err">&#39;&#39;</span><span class="p">,</span> <span class="nx">s</span>
</span><span class='line'>      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span class='line'>          <span class="nx">res</span><span class="p">,</span> <span class="nx">rem</span> <span class="p">=</span> <span class="nx">parseString</span><span class="p">(</span><span class="nx">s</span><span class="p">[:</span><span class="mi">1</span><span class="p">])</span>
</span><span class='line'>          <span class="k">return</span> <span class="nx">s</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">rem</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span>New Version of parseInt </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='go'><span class='line'><span class="kd">func</span> <span class="nx">parseInt</span><span class="p">()</span> <span class="nx">Parser</span><span class="p">&lt;</span><span class="nx">Int</span><span class="p">&gt;</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">return</span> <span class="kd">func</span> <span class="p">(</span><span class="nx">s</span> <span class="kt">string</span><span class="p">)</span> <span class="p">(</span><span class="kt">int</span><span class="p">,</span> <span class="kt">string</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="nx">resString</span><span class="p">,</span> <span class="nx">rem</span> <span class="p">=</span> <span class="nx">parseString</span><span class="p">(</span><span class="nx">s</span><span class="p">)</span>
</span><span class='line'>      <span class="nx">res</span><span class="p">,</span> <span class="nx">_</span> <span class="p">=</span> <span class="nx">strconf</span><span class="p">.</span><span class="nx">Atoi</span><span class="p">(</span><span class="nx">resString</span><span class="p">)</span> <span class="c1">// we are ignoring error for the simplicity of the example</span>
</span><span class='line'>      <span class="k">return</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">rem</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>At this point we need to define another interface that our Parser is going to implement:</p>

<figure class='code'><figcaption><span>Monad interface </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='go'><span class='line'><span class="kd">type</span> <span class="nx">Monad</span><span class="p">&lt;</span><span class="nx">T</span><span class="p">&gt;</span> <span class="kd">interface</span> <span class="p">{</span>
</span><span class='line'>  <span class="nx">bind</span> <span class="kd">func</span><span class="p">(</span><span class="nx">f</span> <span class="kd">func</span><span class="p">(</span><span class="nx">v</span> <span class="nx">T</span><span class="p">)</span> <span class="nx">Monad</span><span class="p">&lt;</span><span class="nx">K</span><span class="p">&gt;)</span> <span class="nx">Monad</span><span class="p">&lt;</span><span class="nx">K</span><span class="p">&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Now let&rsquo;s implement bind function for Parser. Pay attention. This is the most difficult
part of the whole narration.</p>

<figure class='code'><figcaption><span>Parser's Bind </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='go'><span class='line'><span class="kd">func</span> <span class="p">(</span><span class="nx">p</span> <span class="o">*</span><span class="nx">Parser</span><span class="p">&lt;</span><span class="nx">T</span><span class="p">&gt;)</span> <span class="nx">bind</span><span class="p">(</span><span class="nx">f</span> <span class="kd">func</span><span class="p">(</span><span class="nx">v</span> <span class="nx">T</span><span class="p">)</span> <span class="nx">Parser</span><span class="p">&lt;</span><span class="nx">K</span><span class="p">&gt;)</span> <span class="nx">Parser</span><span class="p">&lt;</span><span class="nx">K</span><span class="p">&gt;</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">return</span> <span class="kd">func</span> <span class="p">(</span><span class="nx">s</span> <span class="kt">string</span><span class="p">)</span> <span class="p">(</span><span class="nx">K</span><span class="p">,</span> <span class="kt">string</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="nx">value</span><span class="p">,</span> <span class="nx">newS</span> <span class="o">:=</span> <span class="nx">p</span><span class="p">(</span><span class="nx">s</span><span class="p">)</span>
</span><span class='line'>      <span class="k">return</span> <span class="nx">f</span><span class="p">(</span><span class="nx">value</span><span class="p">)(</span><span class="nx">newS</span><span class="p">)</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>What it does it return a function that is a chain of two functions together. Function p
and function f. Bind method just takes two functions and composes them into a bigger function.</p>

<p>The implementation of our example now turns into the following:</p>

<figure class='code'><figcaption><span>Example With Monads </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='go'><span class='line'><span class="kd">func</span> <span class="nx">parse</span><span class="p">()</span> <span class="nx">Parser</span><span class="p">&lt;(</span><span class="kt">int</span><span class="p">,</span> <span class="kt">string</span><span class="p">)&gt;</span> <span class="p">{</span>
</span><span class='line'>  <span class="nx">parseInt</span><span class="p">().</span><span class="nx">bind</span><span class="p">(</span><span class="kd">func</span> <span class="p">(</span><span class="nx">i</span> <span class="kt">int</span><span class="p">)</span> <span class="nx">Parser</span><span class="p">&lt;(</span><span class="kt">int</span><span class="p">,</span> <span class="kt">string</span><span class="p">)&gt;</span> <span class="p">{</span>
</span><span class='line'>      <span class="nx">parseString</span><span class="p">().</span><span class="nx">bind</span><span class="p">(</span> <span class="kd">func</span> <span class="p">(</span><span class="nx">s</span> <span class="kt">string</span><span class="p">)</span> <span class="nx">Parser</span><span class="p">&lt;(</span><span class="kt">int</span><span class="p">,</span> <span class="kt">string</span><span class="p">)&gt;{</span>
</span><span class='line'>      <span class="p">).</span><span class="nx">lift</span><span class="p">((</span><span class="nx">i</span><span class="p">,</span> <span class="nx">s</span><span class="p">))</span>
</span><span class='line'>  <span class="p">})</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Here we encounter another method of that every monad should implement - lift. In Haskell this method is called return, but I decided not to use this name in order to avoid
confusion with the built in return. Here is the implementation of lift.</p>

<figure class='code'><figcaption><span>Parser's Lift </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='go'><span class='line'><span class="kd">func</span> <span class="p">(</span><span class="nx">p</span> <span class="o">*</span><span class="nx">Parser</span><span class="p">&lt;</span><span class="nx">T</span><span class="p">&gt;)</span> <span class="nx">lift</span><span class="p">(</span><span class="nx">v</span> <span class="nx">T</span><span class="p">)</span> <span class="nx">Parser</span><span class="p">&lt;</span><span class="nx">T</span><span class="p">&gt;</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">return</span> <span class="kd">func</span> <span class="p">(</span><span class="nx">s</span> <span class="kt">string</span><span class="p">)</span> <span class="p">(</span><span class="nx">T</span><span class="p">,</span> <span class="kt">string</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="k">return</span> <span class="p">(</span><span class="nx">v</span><span class="p">,</span> <span class="nx">s</span><span class="p">)</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Lift just wraps a value into a function.</p>

<p>What we implemented here is called state monad. For me it was the hardest monad
to understand. I hope this blog post helps you in your understanding of monads.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2018/12/26/conscious-programmer/">Conscious Programmer</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2018-12-26T00:32:37-08:00'><span class='date'><span class='date-month'>Dec</span> <span class='date-day'>26</span><span class='date-suffix'>th</span>, <span class='date-year'>2018</span></span> <span class='time'>12:32 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Authors of some blog posts on the Internet deprive software engineering of the
right to be called an engineering discipline. They like to give examples of how
accountable and responsible real engineers are and how reckless are software
engineers. As a person who spent 7 years in university learning different areas
of math in order to become a software engineer I find those statements
preposterous and insulting. At the same time I have to admit that a lot of
practices that I see in the industrial software engineering give some ground to
those statements. I arrive to a conclusion that even if software is an
engineering discipline not everyone practices it as such.</p>

<p>After ten years in the industry I&rsquo;m disappointed by how things are usually
done. The experience that you gain doesn&rsquo;t elevate you. You keep running into
the same issues that you need to troubleshoot over your weekend. There is no
tradition to follow the principles of design that would allow developers to
avoid those mistakes. Andrew Hunt and David Thomas discuss these principles in
their book Pragmatic Programmer. I&rsquo;ve never seen those principles applied
consciously in practice. Notorious user&rsquo;s convenience drives design processes
instead of mathematical purity. For some reason developers assume that their
software will be used by brainless monkeys.</p>

<p>Software developers can decide to use a library without fully understanding the
characteristics of the library. It&rsquo;s unheard of in any other engineering
discipline to use a material with unknown parameters.</p>

<p>Software is one of the most complex systems we&rsquo;ve ever dealt with in the
history of mankind. The horizon of available programs and libraries constantly
expands. In these circumstances programmers are forced to deal with
uncertainty. Writing a new piece of software is like sending a moon probe.
Every time we argue whether the Moon is solid.</p>

<p>Fashion and market opportunity drive design decisions. The industry is not set
up to make conscious decisions. We have many products with similar
characteristics. Software community keeps creating new versions of the same
thing introducing the same problems.</p>

<p>Why do we have five different databases?! Every new database claims to be
better than all previous ones. After building the new database its developers
create connectors to old databases. They want to be a part of the community.
Otherwise the inertia will spew them. From outside it may look like conspiracy
theory. Programmers create jobs for themselves. Companies waste their resources
picking among all possible options or maintaining all of them.</p>

<p>In these cases I like to say that there is no need to look for conspiracy where
you can explain everything with negligence. Instead of creating five databases
or even creating one highly configurable database we need to create medium
sized components that allow us to quickly construct any of those databases.</p>

<p>Every creator of a new database who realized another use case
where the database can be useful should go back and break existing databases
into smaller pieces with his new understanding of the domain and build his new
database with some more approaches.</p>

<p>Every creator of a new database should go back, break existing databases into
smaller pieces, and construct his database from those pieces. This approach may
not be the fastest for him. But it will pave way for the future database
builders. They will have components more suited for constructing for databases.
Of course no venture capitalist will fund years of refactoring of old databases
in order to build another one in one day.</p>

<p>In this situation I see open source as the solution to this issue. Only the
users of the software themselves can build the right tool. They won&rsquo;t care
about marketing their tool. They will use this tool themselves. They know what
they need. It makes the process of software development very similar science.</p>

<p>Unlike what software engineering does to programs, science refines and expands
its theories. Many people tend to compare software engineering to manufacturing
process. I find this comparison inaccurate. Software engineering is more like
design process.</p>

<p>In manufacturing you need to create blueprints specific to the manufacturing
line. Similar parts need to be redesigned for different manufacturing lines.
Software engineering has this unique ability to reuse blueprints without
implementing them in the physical world.</p>

<p>In software engineering every blueprint is already a product. This product is
very malleable. As such, it doesn&rsquo;t make sense to create another blueprint if
you already have one. You need to go back split the initial blueprint, pick the
parts that you need, complement with missing part, and  ship your new product.
You product will consist of parts of old blueprint and new blueprints.</p>

<p>In science we add layers of knowledge on top of existing layers. We restructure
existing knowledge, but we never recreate existing concepts. Nobody has several
implementations of Newtonian physics where gravity works slightly different in
different implementations. Software engineering should employ similar approach.
Reusable implementations of existing algorithms that can be assembled into
anything we want like Lego bricks.</p>

<p>Modern programming languages are a break through in this area. But we still
have a huge gap between the abstractions that modern languages provide and
library primitives. Languages give us too small abstractions. Libraries give us
too big abstractions. The great number of different languages only inhibits the
formation of this middle layer.</p>

<p>So, let&rsquo;s start picking our tools and libraries carefully without creating
redundancy. Let&rsquo;s tear existing tools apart in order to create new tools from
those parts. Those smaller parts in their turn can serve somebody else in their
projects.</p>

<p>And we need to have one language that is truly universal. We don&rsquo;t have such a
language yet. This language should produce truly composable primitives. So far
it looks like Haskell is the one. Though the language research is still in
progress.</p>

<p>I&rsquo;m happy to report that in recent years great software with focused purpose
started emerging. I would like to endorse suckless tools. They provide truly
reusable pieces of software. Xmonad and similar minimalistic window managers
perfectly complement suckless tools. These programs allow you to build desktop
environment that can evolve with your understanding of efficient workspace.</p>

<p>Unix philosophy is another great example of how composable programs can be built.
It looks like there is a way. We just need to try harder.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2018/02/21/two-ways-to-organize/">Two Ways to Organize Anything</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2018-02-21T23:11:39-08:00'><span class='date'><span class='date-month'>Feb</span> <span class='date-day'>21</span><span class='date-suffix'>st</span>, <span class='date-year'>2018</span></span> <span class='time'>11:11 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><h2>Two Ways to Structure Things</h2>

<p>I&rsquo;ve come to understanding that most people organize things like if they were
disassembling a car: 5 inch screws in one pile, 3 inch screws into another
pile, nuts in a third pile, etc. This is the approach that comes first to our
mind when we need to organize something. However it&rsquo;s not the easiest way to
make sense of the whole system if it&rsquo;s structured this way. The whole system
looks like several boxes with nuts and screws of different shapes and sizes.</p>

<p>Another way to do it is by structuring the whole system as interacting
entities. Screws and nuts from engine go into one box. Parts for suspensions
system and wheels go into another box. This way we see functioning elements
instead of piles of smaller parts.</p>

<p>Let&rsquo;s discuss each of the approaches in details below and with some examples.
In this context let&rsquo;s think about the whole system and several entities standing
side by side or as a tree of objects. A good example would be a row of people.
The first approach I call horizontal, the second - vertical.</p>

<h2>Horizontal Slicing</h2>

<p>The first approach thinks about this row of people as several buckets: one
bucket with heads, one bucket with hands, one bucket with bodies, one bucket
with legs, and one bucket with feet. Not only imagining it is unpleasing it&rsquo;s
also disfunctional. Parts in each of those buckets have very little, so called,
<a href="https://en.wikipedia.org/wiki/Cohesion_(computer_science)">cohesion</a>. They
don&rsquo;t interact with each other. They are useless. They just lie in those piles.</p>

<p>This obviously preposterous structuring in this context finds surprisingly wide
support in software engineering. People create a separate package for
exceptions, a separate package for utility classes, etc. Also instead of
sealing logic inside of one class it gets spread among several classes. This
approach leaves little room for encapsulation. Classes and packages have to
make every its member public, because everyone outside this package or class
needs to interact with their members. Setters and getters are considered the
summit of <a href="https://en.wikipedia.org/wiki/Encapsulation_(computer_programming)">encapsulation</a>
in such an environment.</p>

<p>The only argument in favour of this approach is that it&rsquo;s obvious how to use
it. It may have place if these moving parts are already in a relatively small
box. One box for engine and then smaller boxes inside this one for engine&rsquo;s
screws and nuts.</p>

<h2>Vertical Slicing</h2>

<p>The other approach I would call vertical slicing. Vertical because it thinks
about a row of humans as several buckets - human one, human two, human three.
These bodies can&rsquo;t interact with each other by any means other than defined by
public interfaces for these bodies. The liver of one body doesn&rsquo;t interact with
the heart of another body.</p>

<p>Thinking about your classes and packages as living creatures rather than
a buckets for screws and nuts helps a lot with encapsulation of the classes.
The internal state of those classes can be hidden by conventional java&rsquo;s
access control modifiers.</p>

<p>If all the moving parts of one entity are colocated in the same package it&rsquo;s
easier to find them as you are reading the code.</p>

<p>Each package or class in this approach should be as a small library that
provides functions and has a public interface. When I&rsquo;m writing code using this
approach I&rsquo;m asking myself whether I can extract this package into a library
right now. Once I actually need to extract a library from the project is easy
to do so.</p>

<h2>Other Areas</h2>

<p>It&rsquo;s interesting that this idea is also applicable in other areas of software
engineering. Scrum advocates for vertical slicing of teams. Scrum teams are
supposed to be cross functional and cut through all layers of the product, so,
that one team can deliver any functionality. It&rsquo;s also a popular tendency to
slice teams horizontally. It leads to enormous amount of dependencies between
teams and chaos when delivering a feature that has parts in each of the layers.</p>

<h2>Examples</h2>

<p>Let&rsquo;s take a look at some of examples when the choice between these two
approaches is not particularly obvious, but very important.</p>

<h3>AST Translation</h3>

<p>A perfect case when people get easily confused how to group classes in packages
is translation of an AST. If you have an application and different parts of
it need to translate this tree into different things then you naturally get
an interface for Visitor for this AST. The tendency to put alike with alike
leads to a confusion. Should implementations of the Visitor interface be stored
near AST definition or near the services that use these implementations.</p>

<p>When this question arises I&rsquo;m thinking about the dependencies that each class
has on other classes as lines between classes.
When we move classes from package to package we want to minimise the number of lines
crossing the boundary of packages.</p>

<p>Three dependencies go through the boundary.
<img src="/images/two_ways/in_package_a.png"></p>

<p>Two dependencies go through the boundary.
<img src="/images/two_ways/in_package_b.png"></p>

<p>In this particular case thinking about this AST tree as a library helps a lot.
The interface Visitor should be stored near the AST tree structures in a
separate package and the implementations of this Visitor interface should be
stored where they are used. It also minimizes the number of dependencies going
through the boundary.</p>

<h3>Configuration Beans in Spring</h3>

<p>Engineers also tend to put all bean declarations in one configuration bean at
the top level of their applications. Here I can say that if the classes inside
the package don&rsquo;t rely on IOC container then it&rsquo;s a perfectly normal practice,
because they don&rsquo;t depend on the defined beans and the main application considers
these classes as plain java objects.</p>

<p>However if the classes inside the package expect some IOC container to be in
place then it makes sense to put another configuration class inside the package
because it helps with understanding how classes will be wired together.</p>

<h2>P.S.</h2>

<p>After writing this post I google on this topic and found surprisingly many
similar posts:</p>

<p>[<a href="http://www.markhneedham.com/blog/2012/02/20/coding-packaging-by-vertical-slice/">http://www.markhneedham.com/blog/2012/02/20/coding-packaging-by-vertical-slice/</a>]
[<a href="https://simpleprogrammer.com/understanding-the-vertical-slice/">https://simpleprogrammer.com/understanding-the-vertical-slice/</a>]</p>

<p>This link has even more ways to structure code. What I call horizontal is
called by kind in this blog:
[<a href="https://medium.com/@msandin/strategies-for-organizing-code-2c9d690b6f33">https://medium.com/@msandin/strategies-for-organizing-code-2c9d690b6f33</a>]</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2018/01/22/variants-of-builder-pattern/">Classification of Variants of Builder Pattern</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2018-01-22T20:58:57-08:00'><span class='date'><span class='date-month'>Jan</span> <span class='date-day'>22</span><span class='date-suffix'>nd</span>, <span class='date-year'>2018</span></span> <span class='time'>8:58 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><h2>Intro</h2>

<p>Builder pattern seems to be one of the most versatile patterns of all
creational patterns. Its role is usually underestimated and it usually goes
unnoticed among other easier for understanding creational patterns: <code>Abstract
Factory</code>, <code>Singleton</code>, <code>Prototype</code>. Further I suggest to review some of
variations of <code>Builder</code> pattern. In certain cases the variations bring
the pattern closer to <code>Visitor</code> pattern. In other cases the modifications bring
it closer to <code>Abstract Factory</code> pattern. Nevertheless the way it is used stays the same.
All the variants give us fine tuned control over the dependencies and modularity
of the code where the <code>Builder</code> pattern is used.</p>

<h2>Classic Description</h2>

<p><code>Builder</code> pattern is widely known from the book by Gang of Four<strong>[1]</strong></p>

<p><code>Builder</code> pattern separates the process of construction of a complex object from
its representation. So that the outcome of the same process of construction
can be different.</p>

<p>Classic applications of builder pattern is presented on the class diagram
<img src="/images/builder/class_diagram.png"></p>

<p>Sequence diagram</p>

<p><img src="/images/builder/interaction_diagram.png"></p>

<p>illustrates the relationship of builder and director with the client. This
variant of <code>Builder</code> pattern can be used in a code that is responsible for
building charts of arbitrary format:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>class PriceData {
</span><span class='line'>    Map&lt;String, Integer&gt; data;
</span><span class='line'>    public void buildChart(ChartBuilder chartBuilder) {
</span><span class='line'>        for (Map.Entry&lt;String, Integer&gt; entry: data.entrySet()) {
</span><span class='line'>            chartBuilder.addKeyValue(
</span><span class='line'>                entry.getKey(), entry.getValue());
</span><span class='line'>        }
</span><span class='line'>    }
</span><span class='line'>}</span></code></pre></td></tr></table></div></figure>


<p>In this case the main application will be a client. The collector of the data
for the diagrams will be a director. The construction of concrete charts(pie
chart, histograms, line chart) will be done by a concrete implementation of
builder - a class implementing ChartBuilder. This usage allows us to abstract
out the process of construction from the concrete implementation of the object
being constructed.</p>

<h2>Modifications of The Pattern</h2>

<p>In common practice we can encounter modifications of <code>Builder</code> pattern that
allow us to manage dependencies inside the project in various ways. The
modifications fall into different categories based on the location of
GetResult method call and on the number of directors.</p>

<h3>Location of GetResult Call</h3>

<p>Variations of <code>Builder</code> pattern can be classified based on the location of
GetResult call. GetResult method can be called either from the director or
from the client.</p>

<h4>Invocation From Client</h4>

<p>If <code>GetResult</code> method is invoked from the client then this variant is for
abstracting out the director from the implementation of resulting object as
it&rsquo;s represented in the classic case.</p>

<h4>Invocation From Director</h4>

<p>In this case the result is required by the director itself, but the director
doesn&rsquo;t know the implementation. If the client doesn&rsquo;t invoke set-methods of
the Builder then this implementation of Builder pattern can be replaced with
<code>AbstractFactory</code>. In the case when a part of the director should be configured
before passing it to the director <code>AbstractFactory</code> is not suitable because it
focuses on synchronous object construction. In this case <code>Builder</code> pattern is the
most suitable option.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>class ClassProcessor {
</span><span class='line'>    public main() {
</span><span class='line'>        builder = new ExprProcBuilder();
</span><span class='line'>        builder.setClassFields()
</span><span class='line'>        methodProcessor.processMethod(builder);
</span><span class='line'>    }
</span><span class='line'>}
</span><span class='line'>class MethodProcessor {
</span><span class='line'>    public processMethod(ExprProcBuilder builder) {
</span><span class='line'>        builder.addLocalVars();
</span><span class='line'>        builder.buildExprProc()
</span><span class='line'>    }
</span><span class='line'>}</span></code></pre></td></tr></table></div></figure>


<h3>The Number of Directors</h3>

<p>Variations of the pattern can also be defined by the number of directors.</p>

<h4>No Directors</h4>

<p>There may be no directors. In this case <code>Builder</code> pattern is used as a constructor
with named arguments. Client and director are the same entity.</p>

<h4>One Director</h4>

<p>If there is one director then it leads us to the classical variant of <code>Builder</code>
pattern for abstracting out the product construction from its concrete
implementation.</p>

<h4>Several Directors</h4>

<p>There may be more than one director. Everyone in the chain of directors sets
the parameters that it knows about and passes the builder to the next director.
This variant of <code>Builder</code> pattern reminds more of <code>Visitor</code> pattern. Pattern
<code>Visitor</code> is usually used for handling <code>Composite</code> pattern. In the case of
<code>Builder</code> pattern the visited objects can have arbitrary nature. Here is an illustration
of the case with several directors:</p>

<p><img src="/images/builder/chain_of_invocations.png"></p>

<h2>Features of The Pattern</h2>

<h3>Inversion of Dependencies</h3>

<p>One of the main reasons to use <code>Builder</code> pattern - inversion of dependencies. The
builder is passed to a director during construction, what ensures isolation of the
director from the implementation details of concrete builder.</p>

<h3>Named Arguments of Constructor</h3>

<p>Another reason as it&rsquo;s specified in [2] to use <code>Builder</code> pattern can be a lot
of arguments of the class being constructed. Let&rsquo;s take a look at a piece of
sample code.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>new Builder().setA(value1).setB(value2).createProduct()</span></code></pre></td></tr></table></div></figure>


<p>From this code it&rsquo;s clear that <code>value1</code> becomes <code>A</code> in the new product, and
<code>value2</code> becomes <code>B</code>. It allows us to change the order of arguments in the
invocation. Named arguments make the code more readable. The invocation of
method <code>GetResult</code> is done by the director itself, which is also a client.
<code>Builder</code>&rsquo;s role here is similar to the role of <code>AbstractFactory</code> pattern, but
unlike <code>AbstractFactory</code> pattern, who&rsquo;s task is to give access to construction
of construction of a group of connected objects, <code>Builder</code> is focused on
construction of instances of only one class.</p>

<h3>Decomposition in Time</h3>

<p>This pattern also allows us to configure builder as we receive data necessary
for configuring it. So the construction can lapse in time instead of happening
at once as it&rsquo;s done in factories or constructors. <code>Builder</code> pattern tracks the
consistency of the object being constructed and if some of the arguments are
missing it can throw exceptions or execute any other action required to inform
about the incomplete state.</p>

<h3>Loosening Coupling</h3>

<p>This approach also allows us to loosen coupling between classes. Each class can
set only the arguments this class is aware of and pass the builder further in
the chain of construction. The classes only need to know about the structure of
the builder and don&rsquo;t need to know about each other. They also only work with
the methods they need to know of and don&rsquo;t need to care about the rest of the builder.
This usage of <code>Builder</code> pattern makes it very similar to <code>Visitor</code> pattern.</p>

<p>Then method <code>GetResult</code> can be invoked when the builder is returned back
to the client from the chain of invocations inside directors(in the beginning
of the chain) or by the final director(end of the chain).</p>

<h3>Tolerance for Change of Data Format</h3>

<p>If <code>Builder</code> pattern is used as in sections <code>Loosening Coupling</code> and <code>Several
Directors</code> then if we need to collect more data we can use new methods only
where they are required keeping the rest of the chain of directors intact.
Instead of getting data through get methods sometimes it&rsquo;s more flexible to
pass <code>Builder</code> pattern.</p>

<h3>Example</h3>

<p>Let&rsquo;s illustrate what we described above in the case for several directors.
Method GetResult can be invoked by classA as well as by classC. In both cases
classA and classC can&rsquo;t know anything about each other&rsquo;s dependencies, what
reduces dependencies of each of them, but gives them access to the required
object. In addition to that classC receiving partially configured, can change
only the part he knows about and as a result receiving different objects
depending on the requirements.</p>

<p>The latest approach is particularly convenient, when the client class requires
different instances of a class depending on the data that client class has,
but IOC container restricts access to constructors.</p>

<h2>Conclusion</h2>

<p><code>Builder</code> pattern is a sufficiently powerful and flexible instrument for
dealing with dependencies inside a project and inversing the dependencies.
Regrettably, the usage of <code>Builder</code> pattern requires writing a lot of
boilerplate code. It complicates effective usage of this pattern in modern
programming languages.</p>

<p>As Rob Pike appropriately mentioned in his presentation at OSCON 2010: patterns
- are usually solutions whose implementation is missing from the language. We
can only hope that working with builder pattern in future languages will be as
simple as just writing a constructor.</p>

<h2>Appendix A</h2>

<p><img src="/images/builder/class_diagram.png"></p>

<h2>Appendix B</h2>

<p><img src="/images/builder/interaction_diagram.png"></p>

<h2>Appendix C</h2>

<p><img src="/images/builder/chain_of_invocations.png"></p>

<h2>Bibliography</h2>

<ol>
<li>Erich Gamma and others. Design Patterns: Elements of Reusable Object-Oriented Software, 395 p.</li>
<li>Bloch J. Effective Java. Second edition. Prentice Hall, 2008.</li>
<li>More on getters and setters - JavaWorld [Electronic resource]. URL: <a href="http://www.javaworld.com/javaworld/jw-01-2004/jw-0102-toolbox.html">http://www.javaworld.com/javaworld/jw-01-2004/jw-0102-toolbox.html</a> (date of access: 06.02.2011).</li>
</ol>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2017/10/14/everything-is-code/">Everything Is Code</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2017-10-14T22:14:57-07:00'><span class='date'><span class='date-month'>Oct</span> <span class='date-day'>14</span><span class='date-suffix'>th</span>, <span class='date-year'>2017</span></span> <span class='time'>10:14 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I started my long path into the world of computing in norton commander. Then I
worked in windows 3.11 and windows 95 all windows through windows 2003, windows
xp. In parallel I was introduced to linux. Initially the only interface I saw
in Linux was pico commander. Then all the associates of xwindow system showed
up - gnome, kde, xfce.</p>

<p>The evolution of interfaces that I learned was from command line to graphical
interface. The introduction of graphical interface seemed to be a progress.
The introduction of touch screen interfaces that came with the advent of iphone
era produced even more confusion. Around that time I graduated from university
and started working in enterprise as a java programmer.</p>

<p>During my 5 years at the university I participated in ICPC. ICPC is an
international competition in programming. You have three people behind one
computer and 8-12 programming problems to solve. First two years we were
programming in Pascal. Third year we programmed in C++ and then moved to Java
and eclipse as an IDE. Java seemed like a progress. Intelligent autocompletion
in Eclipse completely blew my mind. Most of the time we weren&rsquo;t typing - we
were tapping ctrl-space and the IDE seemed to have been writing code for us.
Every winter and summer we used to go to programming camps in Petrozavodsk. To
one of those camps a team from Poland was invited. They were very strong and
they were programming C++ in &hellip; Vim. This discovery completely threw me off.
It was completely unclear to me why they would use Vim. Vim seemed to be
something ancient, completely unfit for our twenty first century. I never
bothered to spend too much time researching this phenomenon, but it definitely
struck me, and I had remembered it.</p>

<p>So, when I went to enterprise I was completely confident that I used the most
advanced technologies for programming. After a couple of years in the industry
I got interested in Vim. It was the only editor available over ssh that we used
for programming on remote dev boxes. I had heard the editor was good and I
decided to give it a try. So I had been merely playing with Vim until I
attended a talk by one of our colleagues - Kirill Ishanov. His introduction to
Vim flipped my world. At that time I hadn&rsquo;t realized all ramifications of my
discovery. Now I can tell you what impressed me - Vim was an interpreter of
text editing language. Every keystroke in command mode is an instruction in
this language. If you want you can put those instructions in a register and
execute them in a batch. It&rsquo;s called macros. You can record macros by entering
commands and specifying what register you want to store them in or you can just
copy a sequence of letters into this register. Then the whole program would be
replayed from this register. That was the moment when I became an ideological
proponent of vim. Vim wasn&rsquo;t just an editor. It was an interactive text
processor.</p>

<p>Now, getting back to java programming language. At the time when I was
programming in java I was under impression that all languages should be or are
like java - some variation of c like syntax, imperative in its nature. It
seemed normal to write code in an editor, then it would be compiled and
executed. Another thing was execution. We used Far manager(clone of Norton
Commander) to run our apps. We rarely typed commands in the command line.
Command line seemed like something old fashioned. We didn&rsquo;t see point to use
it. At some point we started using it only because it was the only way to
communicate to a remote computer over ssh. We didn&rsquo;t like it. It seemed like a
limitation of our abilities. I had had this attitude for command line until I
visited the US for the first time. Engineers at the US office were programming
in vim and were using command line like it was their editor for entering small
programs. I was impressed. I started learning how to use command line as
fluently as they did. Though I couldn&rsquo;t realize the implications of this
discovery until I learned the third missing piece - powerful language with
expressiveness of python and strictness of java. Before I found this language
my understanding of command line was that it should have weird syntax. Haskell
completely rocked my world. Its command line allowed me to find out functions'
types which served as a good documentation. Most of the time I could infer what
functions were doing just based on their name and types. Declarative style of
functional programming worked very well with interactive interpreter. Instead
of giving instructions you were describing what you wanted to get.</p>

<p>This was when I realized that this idea should be taken to the extreme -
communication with a computer should happen inside a language interpreter.
Communication with your fellow programmers should be done through code. Code is
the ultimate way to communicate exactly what you want your computer to do.</p>

<p>Every time I hear someone saying that I they&rsquo;ve achieved something on their
computer without writing code and that they avoid writing code because writing
code is erroneous it means they just didn&rsquo;t realize that they wrote a line of
code. If you don&rsquo;t program your computer it means instead of putting your
commands for the computer in a batch and executing them, you execute them
yourself without recording what you&rsquo;ve done. It&rsquo;s even more error prone. It&rsquo;s
much harder to improve this way because now you need to remember what you&rsquo;ve
done last time and you need to be diligent enough to repeat it precisely again.
Why bother remembering if you can just record your commands and work with them
in a text editor? Text and language are the tools of thousands years old. They
are the best so far to communicate information. Visual information, gestures
are the most effective. But if you want to preserve your knowledge for some
extended period of time then text is the most compact way to do so.</p>

<p>If you write code then you record all the steps that you are about to make. You
can analyze what you are about to do. You can version your code in the most
convenient way that is currently known - version control systems. Also compiler
can help you analyze what you do. Even if you use your computer in an
interactive way then using command line allows you to extend your vocabulary of
commands. You can recall previous commands and reuse them even if you never
bothered to add them to you standard library of commands. Computer is a machine
that is built to execute commands.</p>

<p>Writing code is the best way to interact with your computer if not the only one.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2017/09/21/pomodoro-technique-timer/">Pomodoro Technique Timer</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2017-09-21T23:43:14-07:00'><span class='date'><span class='date-month'>Sep</span> <span class='date-day'>21</span><span class='date-suffix'>st</span>, <span class='date-year'>2017</span></span> <span class='time'>11:43 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Pomodoro technique is a useful time management technique. There have been
written a lot about pomodoro technique ever since it was published by
Francesco Cirillo in the late 1980-s.</p>

<p>The technique recommends using a mechanical timer for measuring time. There are
several reasons for using a mechanical timer: ticking timer reminds about
pomodoro in progress and presumably boosts focus.</p>

<p>Conventional kitchen timers are very nice, but they are not particularly
convenient for office environment. They are ticking, and their ringing is too
loud and very difficult to adjust. There are many apps for pomodoro technique
timer, but I&rsquo;ve always wanted something that satisfies my requirements and has
a physical button rather than a virtual one. I tried retrofitting existing
timers and toys. It turned out to be easier to build an electronic timer. It
also looks very techy.</p>

<p>You can find the eagle project files
<a href="https://github.com/VictorDenisov/pomodoro-timer-pcb">here</a>. I used oshpark
community order for PCBs. You can order this PCB
<a href="https://oshpark.com/shared_projects/IVhyku4U">here</a> The firmware is available
<a href="https://github.com/VictorDenisov/arduino-pomodoro">here</a> I used sparkfun
<a href="https://www.sparkfun.com/products/9825">USBtiny ISP</a> to program it.</p>

<p>The timer has five binary positions for displaying remaining minutes. It also
has LEDs for busy and available mode. You can tell your colleagues that if the
light is red then you are busy. The timer goes off with an audible beep. The
whole system is designed the way that you can use arduino IDE to compile the
firmware and program the device.</p>

<p>A general view of the timer.
<img src="/images/pomodoro/timer_view.jpg"></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/02/16/linux-programming-number-2/">Linux Programming #2</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-02-16T15:31:00-08:00'><span class='date'><span class='date-month'>Feb</span> <span class='date-day'>16</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>3:31 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>This is the synopsis of the second Linux programming lab.</p>

<h2>The assignment for the second lab</h2>

<p>The second assignment is to write a program that prints words which are
combinations of all characters of an alphabet. The combinations should have
certain length. For example, if length of the words is 3 and the alphabet is
&ldquo;abc&rdquo; then all possible combinations will be</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>aaa
</span><span class='line'>aab
</span><span class='line'>aac
</span><span class='line'>aba
</span><span class='line'>abb
</span><span class='line'>abc
</span><span class='line'>aca
</span><span class='line'>acb
</span><span class='line'>acc
</span><span class='line'>baa
</span><span class='line'>bab
</span><span class='line'>bac
</span><span class='line'>bba
</span><span class='line'>bbb
</span><span class='line'>bbc
</span><span class='line'>bca
</span><span class='line'>bcb
</span><span class='line'>bcc
</span><span class='line'>caa
</span><span class='line'>cab
</span><span class='line'>cac
</span><span class='line'>cba
</span><span class='line'>cbb
</span><span class='line'>cbc
</span><span class='line'>cca
</span><span class='line'>ccb
</span><span class='line'>ccc</span></code></pre></td></tr></table></div></figure>


<h2>Naive solution</h2>

<p>Here is the easiest solution to print a list like this one above:</p>

<figure class='code'><figcaption><span>primitive bruteforce with nested loops </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='c'><span class='line'><span class="kt">char</span> <span class="o">*</span> <span class="n">alph</span> <span class="o">=</span> <span class="s">&quot;abc&quot;</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">k1</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">k1</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">;</span> <span class="o">++</span><span class="n">k1</span><span class="p">)</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">k2</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">k2</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">;</span> <span class="o">++</span><span class="n">k2</span><span class="p">)</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">k3</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">k3</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">;</span> <span class="o">++</span><span class="n">k3</span><span class="p">)</span>
</span><span class='line'>          <span class="p">{</span>
</span><span class='line'>            <span class="n">printf</span> <span class="p">(</span><span class="s">&quot;%c%c%c</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">alph</span><span class="p">[</span><span class="n">k1</span><span class="p">],</span> <span class="n">alph</span><span class="p">[</span><span class="n">k2</span><span class="p">],</span> <span class="n">alph</span><span class="p">[</span><span class="n">k3</span><span class="p">]);</span>
</span><span class='line'>          <span class="p">}</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>  <span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>However this solution has a significant limitation. We can&rsquo;t get words of
arbitrary length. Recursive bruteforce can overcome this limitation.</p>

<h2>Recursive bruteforce</h2>

<figure class='code'><figcaption><span>recursive bruteforce </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='c'><span class='line'><span class="kt">void</span> <span class="nf">go</span> <span class="p">(</span><span class="kt">int</span> <span class="n">k</span><span class="p">)</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>  <span class="k">if</span> <span class="p">(</span><span class="n">k</span> <span class="o">==</span> <span class="n">N</span><span class="p">)</span> <span class="c1">// N - length of the word</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>      <span class="n">printf</span> <span class="p">(</span><span class="s">&quot;%s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">a</span><span class="p">);</span>
</span><span class='line'>      <span class="k">return</span><span class="p">;</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>  <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">ALPH_LEN</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>      <span class="n">a</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">alph</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
</span><span class='line'>      <span class="n">go</span> <span class="p">(</span><span class="n">k</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Invocation of go from the main function looks like this:</p>

<figure class='code'><figcaption><span>recursive bruteforce </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='c'><span class='line'><span class="n">go</span> <span class="p">(</span><span class="mi">0</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>The flowchart of the go function is presented below.</p>

<p><img src="/images/brute_force/recursive_brute_force.png"></p>

<p>Recursive brute force can be regarded as a process of spawning a copy of the
same function and entering it again with storing the current position.</p>

<p>The following flowchart depicts control flow of a program that prints all words
of length 4. Green lines mean forward pass. Blue lines mean backward pass when
the function returns to the place of its invocation. Black lines stand for
inactive paths.</p>

<p>Press right mouse button on the image and choose &ldquo;View image&rdquo; to see full size
image.</p>

<p><img src="/images/brute_force/recursive_brute_force_many.png"></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/02/09/linux-programming-number-1/">Linux Programming #1</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-02-09T19:03:00-08:00'><span class='date'><span class='date-month'>Feb</span> <span class='date-day'>9</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>7:03 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>This is the synopsis of the first Linux programming lab.</p>

<h2>The description of the problem to be solved</h2>

<p>During the whole course one problem should be solved: restore a password
from a hash code generated by htpasswd command. The password should be restored
using several approaches:</p>

<ul>
<li>recursive brute force,</li>
<li>iterative brute force,</li>
<li>multi threaded brute force on a machine with several CPUs,</li>
<li>distributed over the network brute force.</li>
</ul>


<h2>The roadmap of the course</h2>

<ul>
<li>Hello world application.</li>
<li>Recursive brute force solution.</li>
<li>Iterative brute force solution.</li>
<li>Multi-threaded brute force solution.</li>
<li>Synchronous thread per client solution.</li>
<li>Asynchronous thread per client solution.</li>
<li>Reactor implementation.</li>
</ul>


<h2>Topics covered in the first lab</h2>

<ul>
<li>Linux shell commands introduction.</li>
<li>Source code editor.</li>
<li>Hello world application.</li>
<li>Stages of program compilation.</li>
<li>Primitive Makefile for the hello world application.</li>
<li>GNU coding standards</li>
</ul>


<h3>Linux shell commands introduction</h3>

<p><a href="http://www.gnu.org/software/bash/manual/bashref.html">Bash reference manual</a></p>

<p>The commands used during the lab are:</p>

<ul>
<li>mkdir - create a directory,</li>
<li>cd - change a directory,</li>
<li>rm - remove a file,</li>
<li>ls - list content of a directory,</li>
<li>gcc - compile source code,</li>
<li>make - run make utility,</li>
<li>./hello_world - run the hello world application.</li>
</ul>


<h3>Source code editor</h3>

<p><a href="http://www.gnu.org/software/emacs/manual/emacs.html">GNU Emacs manual</a></p>

<p>Emacs is one of orthodox editors for C programming.</p>

<p>Here is a list of the most often commands for editing in Emacs:</p>

<ul>
<li>C-x-f - open file</li>
<li>C-x-s - save file</li>
<li>C-x-b - switch buffer</li>
<li>C-x-u - undo</li>
<li>C-space - set mark</li>
<li>A-w - copy</li>
<li>C-w - cut</li>
<li>C-y - paste (yank)</li>
<li>C-e - end of line</li>
<li>C-a - beginning of line</li>
<li>C-A-q - indent block</li>
<li>Esc-Esc-Esc - escape</li>
<li>C-q - cancel key sequence</li>
<li>A-x - run command:

<ul>
<li>shell - run bash,</li>
<li>compile - run make,</li>
<li>grep - run grep,</li>
<li>replace-string - replace.</li>
</ul>
</li>
</ul>


<h3>Hello world application</h3>

<p>Solution that was implemented by the end of the first lab:</p>

<figure class='code'><figcaption><span>hello_main.c </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='c'><span class='line'><span class="cp">#include &lt;stdio.h&gt;</span>
</span><span class='line'><span class="cp">#include &lt;stdlib.h&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="kt">int</span>
</span><span class='line'><span class="nf">main</span> <span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span> <span class="n">argv</span><span class="p">[])</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>  <span class="n">printf</span> <span class="p">(</span><span class="s">&quot;Hello world</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
</span><span class='line'>  <span class="k">return</span> <span class="p">(</span><span class="n">EXIT_SUCCESS</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Stages of program compilation</h3>

<p><a href="http://gcc.gnu.org/onlinedocs/">GCC manuals</a>
You can determine the version of your gcc using command:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>gcc --version
</span></code></pre></td></tr></table></div></figure>


<p>Stages of compilation.</p>

<ul>
<li>preprocessor - the result is source code file,</li>
<li>translator - the result is object file,</li>
<li>linker - the result is executable file.</li>
</ul>


<p>The command line used to compile the application.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>gcc -g -o hello_world -Wall -Werror -O2 hello_world.c
</span></code></pre></td></tr></table></div></figure>


<h3>Make utility</h3>

<p><a href="http://www.gnu.org/software/make/manual/make.html">GNU Make manual</a></p>

<p>The Makefile used to compile the application</p>

<figure class='code'><figcaption><span>Makefile </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='make'><span class='line'><span class="nf">all</span><span class="o">:</span> <span class="n">hello_world</span>
</span><span class='line'>
</span><span class='line'><span class="nv">CFLAGS</span><span class="o">+=</span> -g -Wall -Werror -O2
</span></code></pre></td></tr></table></div></figure>


<h3>GNU coding standards</h3>

<p><a href="http://www.gnu.org/prep/standards/standards.html">The GNU coding standards</a></p>

<h2>References</h2>

<ul>
<li>The C Programming Language. Kernighan, Brian W.; Ritchie, Dennis M.</li>
<li>The Practice of Programming. Kernighan, Brian W.; Rob P.</li>
<li>Advanced Programming in the UNIX Environment.</li>
<li>Richard Stevens; Stephen A. Rago</li>
<li>The Unix Programming Environment. Kernighan, Brian W.; Rob P.</li>
<li>The Art of Unix Programming. Eric S. Raymond</li>
<li>Advanced Linux Programming. Mark Mitchel; Jeffrey Oldham; Alex Samuel</li>
<li>The Linux Programming Interface: A Linux and UNIX System Programming Handbook.
Michael Kerrisk</li>
<li>The Standard C Library. Plauger P. J.</li>
<li>UNIX Network Programming, Volume 1: Networking APIs: Sockets and XTI.</li>
<li>Richard Stevens</li>
<li>UNIX Network Programming, Volume 2: Interprocess Communications.</li>
<li>Richard Stevens</li>
</ul>

</div>
  
  


    </article>
  
  <div class="pagination">
    
    <a href="/blog/archives">Blog Archives</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2019/05/06/my-trip-into-monads/">My Trip Into Monads</a>
      </li>
    
      <li class="post">
        <a href="/blog/2018/12/26/conscious-programmer/">Conscious Programmer</a>
      </li>
    
      <li class="post">
        <a href="/blog/2018/02/21/two-ways-to-organize/">Two Ways to Organize Anything</a>
      </li>
    
      <li class="post">
        <a href="/blog/2018/01/22/variants-of-builder-pattern/">Classification of Variants of Builder Pattern</a>
      </li>
    
      <li class="post">
        <a href="/blog/2017/10/14/everything-is-code/">Everything Is Code</a>
      </li>
    
  </ul>
</section>





  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2019 - Victor Denisov -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
 -
<span>Icons made by <a href="https://www.flaticon.com/authors/dave-gandy" title="Dave Gandy">Dave Gandy</a> from <a href="https://www.flaticon.com/" 			    title="Flaticon">www.flaticon.com</a> is licensed by <a href="http://creativecommons.org/licenses/by/3.0/" 			    title="Creative Commons BY 3.0" target="_blank">CC 3.0 BY</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
